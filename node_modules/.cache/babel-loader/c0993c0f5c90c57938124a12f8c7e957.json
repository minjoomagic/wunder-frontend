{"ast":null,"code":"var _jsxFileName = \"/Users/mjmagic/Development/MOD5/final-project/Final-Project-Wunder/wunder-frontend/src/App.js\";\nimport React from \"react\";\nimport { Route, Switch, withRouter } from \"react-router\";\nimport LandingPage from \"./Components/LandingPage/LandingPage\";\nimport Signup from \"./Components//LogIn-SignUp/SignUp\";\nimport Login from \"./Components//LogIn-SignUp/LogIn\";\nimport NavBar from \"./Components//NavBar/NavBar\";\nimport Main from \"./Components//Main/Main\";\nimport ItemContainer from \"./Components/ItemContainer/ItemContainer\";\nimport \"./App.css\";\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: null\n    };\n\n    this.onLoginHandler = user => {\n      console.log(\"onLoginHandlerFIRING!!!\");\n      let token = localStorage.getItem(\"token\");\n      fetch(\"http://localhost:3000/login_user\", {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\",\n          accepts: \"application/json\",\n          authorization: \"\".concat(token)\n        },\n        body: JSON.stringify({\n          user\n        })\n      }).then(resp => resp.json()).then(data => {\n        localStorage.setItem(\"token\", data.jwt);\n        this.setState({\n          user: data.user\n        }, () => {\n          if (this.state.user) {\n            this.props.history.push(\"/main\");\n          }\n        });\n      });\n      console.log(\"token is:\", localStorage.token);\n    };\n\n    this.onCreateUserHandler = user => {\n      console.log(\"i am in create user\", user);\n      let config = {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\",\n          accepts: \"application/json\"\n        },\n        body: JSON.stringify({\n          user: {\n            username: user.username,\n            password: user.password,\n            email: user.email,\n            phone_number: user.phoneNumber\n          }\n        })\n      };\n      fetch(\"http://localhost:3000/users\", config).then(resp => resp.json()).then(data => {\n        console.log(\"create user fired:\", data);\n        this.setState({\n          user: data.user\n        });\n        localStorage.setItem(\"token\", data.token);\n        this.props.history.push(\"/main\");\n      });\n    };\n\n    this.logOutHandler = () => {\n      localStorage.removeItem(\"token\");\n      this.props.history.push(\"/login\");\n      this.setState({\n        user: null\n      });\n    };\n  }\n\n  componentDidMount() {\n    let token = localStorage.getItem(\"token\");\n    console.log(\"App did Mount!, token is: \", token);\n    fetch(\"http://localhost:3000/get_user\", {\n      method: \"GET\",\n      headers: {\n        \"content-type\": \"application/json\",\n        accepts: \"application/json\",\n        authorization: \"\".concat(token)\n      }\n    }).then(resp => resp.json()).then(data => {\n      console.log(\"data returned from API:\", data);\n      this.setState({\n        user: data.user\n      });\n    });\n    console.log(\"end of component did mount\");\n  } // ================== HANDLE LOGIN ================\n\n\n  render() {\n    console.log(\"logOutHandler\", this.logOutHandler);\n    const API_ITEM = \"http://localhost:3000/items\";\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(NavBar, {\n      onLoginHandler: this.onLoginHandler,\n      title: \"Wunder\",\n      color: \"primary\",\n      logOutHandler: this.logOutHandler,\n      user: this.state.user,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }), React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(Route, {\n      path: \"/items\",\n      render: routerProps => React.createElement(ItemContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/main\",\n      render: routerProps => React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(Main, {\n        logOutHandler: this.logoutHandler,\n        user: this.state.user,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/login\",\n      render: routerProps => React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(Login, {\n        onLoginHandler: this.onLoginHandler,\n        title: \"Wunder\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/signup\",\n      render: routerProps => React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(Signup, {\n        onCreateUserHandler: this.onCreateUserHandler,\n        title: \"Wunder\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/\",\n      render: routerProps => React.createElement(LandingPage, {\n        title: \"Wunder\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default withRouter(App);","map":{"version":3,"sources":["/Users/mjmagic/Development/MOD5/final-project/Final-Project-Wunder/wunder-frontend/src/App.js"],"names":["React","Route","Switch","withRouter","LandingPage","Signup","Login","NavBar","Main","ItemContainer","App","Component","state","user","onLoginHandler","console","log","token","localStorage","getItem","fetch","method","headers","accepts","authorization","body","JSON","stringify","then","resp","json","data","setItem","jwt","setState","props","history","push","onCreateUserHandler","config","username","password","email","phone_number","phoneNumber","logOutHandler","removeItem","componentDidMount","render","API_ITEM","routerProps","logoutHandler"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Route, Switch, withRouter } from \"react-router\";\nimport LandingPage from \"./Components/LandingPage/LandingPage\";\nimport Signup from \"./Components//LogIn-SignUp/SignUp\";\nimport Login from \"./Components//LogIn-SignUp/LogIn\";\nimport NavBar from \"./Components//NavBar/NavBar\";\nimport Main from \"./Components//Main/Main\";\nimport ItemContainer from \"./Components/ItemContainer/ItemContainer\";\n\nimport \"./App.css\";\n\nclass App extends React.Component {\n  state = {\n    user: null\n  };\n\n  componentDidMount() {\n    let token = localStorage.getItem(\"token\");\n    console.log(\"App did Mount!, token is: \", token);\n    fetch(\"http://localhost:3000/get_user\", {\n      method: \"GET\",\n      headers: {\n        \"content-type\": \"application/json\",\n        accepts: \"application/json\",\n        authorization: `${token}`\n      }\n    })\n      .then(resp => resp.json())\n      .then(data => {\n        console.log(\"data returned from API:\", data);\n        this.setState({ user: data.user });\n      });\n    console.log(\"end of component did mount\");\n  }\n\n  // ================== HANDLE LOGIN ================\n  onLoginHandler = user => {\n    console.log(\"onLoginHandlerFIRING!!!\");\n    let token = localStorage.getItem(\"token\");\n    fetch(\"http://localhost:3000/login_user\", {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\",\n        accepts: \"application/json\",\n        authorization: `${token}`\n      },\n      body: JSON.stringify({ user })\n    })\n      .then(resp => resp.json())\n      .then(data => {\n        localStorage.setItem(\"token\", data.jwt);\n        this.setState({ user: data.user }, () => {\n          if (this.state.user) {\n            this.props.history.push(\"/main\");\n          }\n        });\n      });\n    console.log(\"token is:\", localStorage.token);\n  };\n\n  // ================== HANDLE CREATE USER ================\n  onCreateUserHandler = user => {\n    console.log(\"i am in create user\", user);\n    let config = {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\",\n        accepts: \"application/json\"\n      },\n      body: JSON.stringify({\n        user: {\n          username: user.username,\n          password: user.password,\n          email: user.email,\n          phone_number: user.phoneNumber\n        }\n      })\n    };\n    fetch(\"http://localhost:3000/users\", config)\n      .then(resp => resp.json())\n      .then(data => {\n        console.log(\"create user fired:\", data);\n        this.setState({ user: data.user });\n        localStorage.setItem(\"token\", data.token);\n        this.props.history.push(\"/main\");\n      });\n  };\n\n  // ================ HANDLE LOGOUT ================\n  logOutHandler = () => {\n    localStorage.removeItem(\"token\");\n    this.props.history.push(\"/login\");\n    this.setState({ user: null });\n  };\n\n  render() {\n    console.log(\"logOutHandler\", this.logOutHandler);\n    const API_ITEM = \"http://localhost:3000/items\";\n\n    return (\n      <div className=\"App\">\n        <NavBar\n          onLoginHandler={this.onLoginHandler}\n          title=\"Wunder\"\n          color=\"primary\"\n          logOutHandler={this.logOutHandler}\n          user={this.state.user}\n        />\n        <Switch>\n          <Route path=\"/items\" render={routerProps => <ItemContainer />} />\n\n          <Route\n            path=\"/main\"\n            render={routerProps => (\n              <div>\n                <Main\n                  logOutHandler={this.logoutHandler}\n                  user={this.state.user}\n                />\n              </div>\n            )}\n          />\n          <Route\n            path=\"/login\"\n            render={routerProps => (\n              <div>\n                <Login\n                  onLoginHandler={this.onLoginHandler}\n                  title=\"Wunder\"\n                  color=\"primary\"\n                />\n              </div>\n            )}\n          />\n          <Route\n            path=\"/signup\"\n            render={routerProps => (\n              <div>\n                <Signup\n                  onCreateUserHandler={this.onCreateUserHandler}\n                  title=\"Wunder\"\n                  color=\"primary\"\n                />\n              </div>\n            )}\n          />\n          {/* ------ Any other route put above this line ------ */}\n          <Route\n            path=\"/\"\n            render={routerProps => <LandingPage title=\"Wunder\" />}\n          />\n        </Switch>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}