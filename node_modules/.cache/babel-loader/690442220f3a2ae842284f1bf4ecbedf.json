{"ast":null,"code":"var _jsxFileName = \"/Users/mjmagic/Development/MOD5/final-project/Final-Project-Wunder/wunder-frontend/src/App.js\";\nimport React, { Component } from \"react\";\nimport { Route, Switch, withRouter } from \"react-router-dom\";\nimport \"./App.css\";\nimport Main from \"./Components/Main\";\nimport Signup from \"./Components/Signup\";\nimport Login from \"./Components/Login\";\nimport UsersContainer from \"./Components/UsersContainer\";\nimport LandingPage from \"./Components/LandingPage\";\nimport About from \"./Components/About\";\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: null\n    };\n\n    this.onLoginHandler = user => {\n      console.log(\"onLoginHandlerFIRING!!!\");\n      let token = localStorage.getItem(\"token\");\n      fetch(\"http://localhost:3000/login_user\", {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\",\n          accepts: \"application/json\",\n          authorization: \"\".concat(token)\n        },\n        body: JSON.stringify({\n          user\n        })\n      }).then(resp => resp.json()).then(data => {\n        localStorage.setItem(\"token\", data.jwt);\n        this.setState({\n          user: data.user\n        }, () => {\n          if (this.state.user) {\n            this.props.history.push(\"/items\");\n          }\n        });\n      });\n      console.log(\"token is:\", localStorage.token);\n    };\n\n    this.onCreateUserHandler = user => {\n      let config = {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\",\n          accepts: \"application/json\"\n        },\n        body: JSON.stringify({\n          user: {\n            username: user.username,\n            password: user.password,\n            address: user.address,\n            phone_number: user.phoneNumber\n          }\n        })\n      };\n      fetch(\"http://localhost:3000/users\", config).then(resp => resp.json()).then(data => {\n        console.log(\"create user fired:\", data);\n        this.setState({\n          user: data.user\n        });\n        localStorage.setItem(\"token\", data.token);\n        this.props.history.push(\"/items\");\n      });\n    };\n\n    this.logoutHandler = () => {\n      localStorage.removeItem(\"token\");\n      this.props.history.push(\"/login\");\n      this.setState({\n        user: null\n      });\n    };\n  }\n\n  componentDidMount() {\n    let token = localStorage.getItem(\"token\");\n    console.log(\"App did Mount!, token is: \", token);\n    fetch(\"http://localhost:3000/get_user\", {\n      method: \"GET\",\n      headers: {\n        \"content-type\": \"application/json\",\n        accepts: \"application/json\",\n        authorization: \"\".concat(token)\n      }\n    }).then(resp => resp.json()).then(data => {\n      console.log(\"data returned from API:\", data);\n      this.setState({\n        user: data.user\n      });\n    });\n    console.log(\"end of component did mount\");\n  } // ================== HANDLE LOGIN ================\n\n\n  render() {\n    console.log(\"logoutHandler\", this.logoutHandler);\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(Route, {\n      path: \"/items\",\n      render: routerProps => React.createElement(Main, {\n        logOutHandler: this.logoutHandler,\n        user: this.state.user,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/me\",\n      render: routerProps => {\n        console.log(\"routerProps\", routerProps);\n        return React.createElement(UsersContainer, {\n          user: this.state.user,\n          title: \"Caravan\",\n          logo: \"truck\",\n          color: \"primary\",\n          blabla: this.logoutHandler,\n          logoutHandler: this.logoutHandler,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/signup\",\n      render: routerProps => React.createElement(Signup, {\n        onCreateUserHandler: this.onCreateUserHandler,\n        title: \"Caravan\",\n        logo: \"truck\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/login\",\n      render: routerProps => React.createElement(Login, {\n        onLoginHandler: this.onLoginHandler,\n        title: \"Caravan\",\n        logo: \"truck\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/about\",\n      render: routerProps => React.createElement(About, {\n        title: \"Caravan\",\n        logo: \"truck\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/\",\n      render: routerProps => React.createElement(LandingPage, {\n        title: \"Caravan\",\n        logo: \"truck\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default withRouter(App);","map":{"version":3,"sources":["/Users/mjmagic/Development/MOD5/final-project/Final-Project-Wunder/wunder-frontend/src/App.js"],"names":["React","Component","Route","Switch","withRouter","Main","Signup","Login","UsersContainer","LandingPage","About","App","state","user","onLoginHandler","console","log","token","localStorage","getItem","fetch","method","headers","accepts","authorization","body","JSON","stringify","then","resp","json","data","setItem","jwt","setState","props","history","push","onCreateUserHandler","config","username","password","address","phone_number","phoneNumber","logoutHandler","removeItem","componentDidMount","render","routerProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Route, Switch, withRouter } from \"react-router-dom\";\nimport \"./App.css\";\n\nimport Main from \"./Components/Main\";\nimport Signup from \"./Components/Signup\";\nimport Login from \"./Components/Login\";\nimport UsersContainer from \"./Components/UsersContainer\";\nimport LandingPage from \"./Components/LandingPage\";\nimport About from \"./Components/About\";\n\nclass App extends Component {\n  state = {\n    user: null\n  };\n\n  componentDidMount() {\n    let token = localStorage.getItem(\"token\");\n    console.log(\"App did Mount!, token is: \", token);\n    fetch(\"http://localhost:3000/get_user\", {\n      method: \"GET\",\n      headers: {\n        \"content-type\": \"application/json\",\n        accepts: \"application/json\",\n        authorization: `${token}`\n      }\n    })\n      .then(resp => resp.json())\n      .then(data => {\n        console.log(\"data returned from API:\", data);\n        this.setState({ user: data.user });\n      });\n    console.log(\"end of component did mount\");\n  }\n  // ================== HANDLE LOGIN ================\n  onLoginHandler = user => {\n    console.log(\"onLoginHandlerFIRING!!!\");\n    let token = localStorage.getItem(\"token\");\n    fetch(\"http://localhost:3000/login_user\", {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\",\n        accepts: \"application/json\",\n        authorization: `${token}`\n      },\n      body: JSON.stringify({ user })\n    })\n      .then(resp => resp.json())\n      .then(data => {\n        localStorage.setItem(\"token\", data.jwt);\n        this.setState({ user: data.user }, () => {\n          if (this.state.user) {\n            this.props.history.push(\"/items\");\n          }\n        });\n      });\n    console.log(\"token is:\", localStorage.token);\n  };\n\n  // ================== HANDLE CREATE USER ================\n  onCreateUserHandler = user => {\n    let config = {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\",\n        accepts: \"application/json\"\n      },\n      body: JSON.stringify({\n        user: {\n          username: user.username,\n          password: user.password,\n          address: user.address,\n          phone_number: user.phoneNumber\n        }\n      })\n    };\n    fetch(\"http://localhost:3000/users\", config)\n      .then(resp => resp.json())\n      .then(data => {\n        console.log(\"create user fired:\", data);\n        this.setState({ user: data.user });\n        localStorage.setItem(\"token\", data.token);\n        this.props.history.push(\"/items\");\n      });\n  };\n  // ================ HANDLE LOGOUT ================\n  logoutHandler = () => {\n    localStorage.removeItem(\"token\");\n    this.props.history.push(\"/login\");\n    this.setState({ user: null });\n  };\n\n  render() {\n    console.log(\"logoutHandler\", this.logoutHandler);\n    return (\n      <div className=\"App\">\n        {/*this.state.user ? this.state.user.username : \"Not Logged In\"*/}\n\n        <Switch>\n          <Route\n            path=\"/items\"\n            render={routerProps => (\n              <Main logOutHandler={this.logoutHandler} user={this.state.user} />\n            )}\n          />\n          <Route\n            path=\"/me\"\n            render={routerProps => {\n              console.log(\"routerProps\", routerProps);\n              return (\n                <UsersContainer\n                  user={this.state.user}\n                  title=\"Caravan\"\n                  logo=\"truck\"\n                  color=\"primary\"\n                  blabla={this.logoutHandler}\n                  logoutHandler={this.logoutHandler}\n                />\n              );\n            }}\n          />\n          <Route\n            path=\"/signup\"\n            render={routerProps => (\n              <Signup\n                onCreateUserHandler={this.onCreateUserHandler}\n                title=\"Caravan\"\n                logo=\"truck\"\n                color=\"primary\"\n              />\n            )}\n          />\n          <Route\n            path=\"/login\"\n            render={routerProps => (\n              <Login\n                onLoginHandler={this.onLoginHandler}\n                title=\"Caravan\"\n                logo=\"truck\"\n                color=\"primary\"\n              />\n            )}\n          />\n\n          <Route\n            path=\"/about\"\n            render={routerProps => (\n              <About title=\"Caravan\" logo=\"truck\" color=\"primary\" />\n            )}\n          />\n\n          <Route\n            path=\"/\"\n            render={routerProps => (\n              <LandingPage title=\"Caravan\" logo=\"truck\" color=\"primary\" />\n            )}\n          />\n        </Switch>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}